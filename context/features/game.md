# 경기 관리

## 개요
경기 일정 생성, 로스터 구성, 실시간 기록, 결과 관리를 수행한다.

## 관련 테이블 (신규 필요)
- `BR_GAME` - 경기 마스터
- `BR_GAME_TEAM` - 경기 참가 팀
- `BR_GAME_ROSTER` - 경기 로스터 (출전 선수)
- `BR_GAME_QUARTER` - 쿼터별 스코어
- `BR_GAME_PLAY` - 플레이 기록 (이벤트)

---

## 기능 목록

### 1. 경기 목록 조회
| 항목 | 내용 |
|------|------|
| 필터 | 상태, 팀, 기간 |
| 검색 | 팀명, 장소 |
| 정렬 | 경기일시, 등록일 |
| 페이징 | 10/20/50건 |

**표시 항목:** 경기일시, 홈팀 vs 어웨이팀, 스코어, 장소, 상태

### 2. 경기 생성
| 필드 | 필수 | 설명 |
|------|------|------|
| 경기일시 | ✅ | 날짜 + 시간 |
| 홈팀 | ✅ | 팀 선택 |
| 어웨이팀 | ✅ | 팀 선택 |
| 장소 | - | 최대 100자 |
| 쿼터 수 | ✅ | 기본 4쿼터 |
| 쿼터 시간 | ✅ | 기본 10분 |

**제약:** 홈팀과 어웨이팀 동일 불가

### 3. 경기 수정
- 상태가 "예정"일 때만 수정 가능
- 경기일시, 장소, 쿼터 설정 수정

### 4. 경기 삭제
- 상태가 "예정"일 때만 삭제 가능
- 소프트 삭제 (DEL_YN = true)

---

## 경기 상태

| 상태 코드 | 설명 |
|----------|------|
| SCHEDULED | 예정 |
| READY | 준비완료 (로스터 확정) |
| LIVE | 진행중 |
| FINISHED | 종료 |
| CANCELLED | 취소 |

---

## 로스터 관리

### 5. 로스터 조회
경기 상세 화면 내 표시

**표시 항목:** 선수명, 등번호, 포지션, 선발여부

### 6. 로스터 등록/수정
| 필드 | 필수 | 설명 |
|------|------|------|
| 선수 | ✅ | 해당 팀 선수 선택 |
| 선발여부 | - | 선발 5명 체크 |

**제약:** 
- 선발은 팀당 최대 5명
- 경기 시작 전까지만 수정 가능

---

## 실시간 기록

### 7. 경기 시작
- 상태: READY → LIVE
- 로스터 최소 인원 체크 (팀당 5명)

### 8. 플레이 기록
| 이벤트 | 필수 입력 | 설명 |
|--------|----------|------|
| 득점 | 선수, 득점유형 | 2점/3점/자유투 |
| 리바운드 | 선수, 리바운드유형 | 공격/수비 |
| 어시스트 | 선수 | 득점 연계 시 |
| 스틸 | 선수 | |
| 블록 | 선수 | |
| 턴오버 | 선수 | |
| 파울 | 선수, 파울유형 | 개인/테크니컬/언스포 |
| 교체 | IN선수, OUT선수 | |

**공통 필드:** 쿼터, 경기시간, 팀

### 9. 쿼터 종료/시작
- 쿼터별 스코어 자동 집계
- 다음 쿼터 시작

### 10. 경기 종료
- 상태: LIVE → FINISHED
- 최종 스코어 확정
- MVP 선정 (선택)

### 11. 기록 수정/삭제
- 경기 종료 전까지 수정 가능
- 삭제 시 스코어 자동 재집계

---

## 경기 결과

### 12. 결과 조회
| 항목 | 내용 |
|------|------|
| 최종 스코어 | 홈 vs 어웨이 |
| 쿼터별 스코어 | 1Q, 2Q, 3Q, 4Q (연장) |
| MVP | 선수명 |
| 팀 통계 | 득점, 리바운드, 어시스트 등 |
| 선수별 통계 | 개인 기록 |

---

## 화면 구성
```
/game                        # 경기 목록
/game/new                    # 경기 생성
/game/{gameId}               # 경기 상세/결과
/game/{gameId}/edit          # 경기 수정
/game/{gameId}/roster        # 로스터 관리
/game/{gameId}/live          # 실시간 기록 (기록원용)
/game/{gameId}/scoreboard    # 전광판 뷰 (읽기전용)
```

---

## API 목록

### 경기
| Method | URL | 설명 |
|--------|-----|------|
| GET | /api/games | 경기 목록 |
| POST | /api/games | 경기 생성 |
| GET | /api/games/{id} | 경기 상세 |
| PUT | /api/games/{id} | 경기 수정 |
| DELETE | /api/games/{id} | 경기 삭제 |

### 로스터
| Method | URL | 설명 |
|--------|-----|------|
| GET | /api/games/{id}/rosters | 로스터 조회 |
| PUT | /api/games/{id}/rosters | 로스터 저장 |

### 실시간 기록
| Method | URL | 설명 |
|--------|-----|------|
| POST | /api/games/{id}/start | 경기 시작 |
| POST | /api/games/{id}/plays | 플레이 기록 |
| PUT | /api/plays/{playId} | 기록 수정 |
| DELETE | /api/plays/{playId} | 기록 삭제 |
| POST | /api/games/{id}/quarter/end | 쿼터 종료 |
| POST | /api/games/{id}/end | 경기 종료 |

### 결과/통계
| Method | URL | 설명 |
|--------|-----|------|
| GET | /api/games/{id}/result | 경기 결과 |
| GET | /api/games/{id}/stats | 경기 통계 |
| GET | /api/games/{id}/plays | 플레이 로그 |